{"ast":null,"code":"var _jsxFileName = \"/home/anshul/Documents/IMG_sched/frontend/src/components/MeetingComment.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nvar path = window.location.pathname;\nvar room = path.substring(path.lastIndexOf('/') + 1);\nvar url = window.location.href;\nvar myParam = location.search.split('myParam=')[1];\nconsole.log(myParam);\nexport const CommentSocket = new WebSocket('ws://' + '127.0.0.1:8000' + '/ws/schedule/' + room + '/');\n\nclass MeetingComment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      comments: [],\n      isloading: true,\n      errors: null\n    };\n    this.getComment = this.getComment.bind(this);\n    this.submit = this.submit.bind(this);\n    this.getComment();\n\n    CommentSocket.onmessage = function (e) {\n      var data = JSON.parse(e.data);\n      var message = data['message'];\n      document.querySelector('#comment-log').value += message + '\\n';\n    };\n  }\n\n  getComment() {\n    fetch('http://127.0.0.1:8000/schedule/comment/' + room, {\n      method: 'GET',\n      headers: {\n        'Authorization': \"JWT \".concat(window.localStorage.getItem('token'))\n      }\n    }).then(response => response.json()).then(response => {\n      console.log(response.json);\n      this.setState({\n        comments: response,\n        isloading: false\n      });\n    }).catch(error => this.setState({\n      error,\n      isloading: false\n    }));\n  }\n\n  submit(e) {\n    document.querySelector('#comment-message-input').onkeyup = function (e) {\n      if (e.keyCode === 13) {\n        document.querySelector('#comment-message-submit').click();\n      }\n    };\n\n    var messageInputDom = document.querySelector('#comment-message-input');\n    var message = messageInputDom.value;\n    CommentSocket.send(JSON.stringify({\n      'message': message,\n      'user': \"admin\"\n    }));\n    this.getComment();\n    messageInputDom.value = '';\n  }\n\n  render() {\n    const _this$state = this.state,\n          isloading = _this$state.isloading,\n          comments = _this$state.comments;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      id: \"comment-log\",\n      cols: \"100\",\n      rows: \"20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"comment-message-input\",\n      type: \"text\",\n      size: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"comment-message-submit\",\n      type: \"button\",\n      value: \"Send\",\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, !isloading ? comments.map(comment => {\n      const comment_id = comment.comment_id,\n            comment_post = comment.comment_post,\n            comment_user = comment.comment_user,\n            datetime = comment.datetime;\n      return React.createElement(\"div\", {\n        key: comment_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, comment_id), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, comment_post), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, comment_user), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \" \", datetime), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }));\n    }) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Loading...\"))));\n  }\n\n}\n\nexport default MeetingComment;","map":{"version":3,"sources":["/home/anshul/Documents/IMG_sched/frontend/src/components/MeetingComment.js"],"names":["React","Component","PropTypes","path","window","location","pathname","room","substring","lastIndexOf","url","href","myParam","search","split","console","log","CommentSocket","WebSocket","MeetingComment","constructor","props","state","comments","isloading","errors","getComment","bind","submit","onmessage","e","data","JSON","parse","message","document","querySelector","value","fetch","method","headers","localStorage","getItem","then","response","json","setState","catch","error","onkeyup","keyCode","click","messageInputDom","send","stringify","render","map","comment","comment_id","comment_post","comment_user","datetime"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\n\nvar path= window.location.pathname;\nvar room = path.substring(path.lastIndexOf('/') + 1);\nvar url = window.location.href;\nvar myParam = location.search.split('myParam=')[1];\nconsole.log(myParam);\n\nexport const CommentSocket = new WebSocket(\n        'ws://' + '127.0.0.1:8000' +\n        '/ws/schedule/' + room +  '/');\n\nclass MeetingComment extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props); \n    this.state = {\n      comments: [],\n      isloading: true,\n      errors: null,\n    };\n    this.getComment = this.getComment.bind(this);\n    this.submit=this.submit.bind(this);\n    this.getComment();\n    CommentSocket.onmessage = function(e) {\n        var data = JSON.parse(e.data);\n        var message = data['message'];\n        document.querySelector('#comment-log').value += (message + '\\n');\n    };\n}\n\n getComment() {\n    fetch('http://127.0.0.1:8000/schedule/comment/'+room,{\n    \tmethod:'GET',\n    \theaders: {\n         'Authorization': `JWT ${window.localStorage.getItem('token')}`\n      }\n    })\n   \t.then(response => response.json())\n   \t.then((response) => {\n   \t\tconsole.log(response.json);\n   \t\tthis.setState({\n   \t\t\tcomments: response,\n   \t\t\tisloading: false,\n   \t\t});\n   \t})\n   \t.catch(error => this.setState({ error , isloading: false}));\n   }\n\n\n    \n   submit(e){\n       document.querySelector('#comment-message-input').onkeyup = function(e) {\n        if (e.keyCode === 13) {  \n            document.querySelector('#comment-message-submit').click();\n        }\n        };\n       var messageInputDom = document.querySelector('#comment-message-input');\n        var message = messageInputDom.value; \n        CommentSocket.send(JSON.stringify({\n            'message': message,\n            'user' : \"admin\"\n        }));\n        this.getComment();\n        messageInputDom.value = '';\n    }\n render(){\n\n \t  const { isloading,comments } =this.state;\n \treturn (\n \t\t<div>\n    <textarea id=\"comment-log\" cols=\"100\" rows=\"20\"></textarea><br/>\n    <input id=\"comment-message-input\" type=\"text\" size=\"100\"/><br/>\n    <input id=\"comment-message-submit\" type=\"button\" value=\"Send\" onClick={this.submit}/>\n \t\t<React.Fragment>\n              <div>\n          {!isloading ? (\n            comments.map(comment => {\n              const { comment_id,comment_post,comment_user,datetime } = comment;\n              return (\n                <div key={comment_id}>\n                <h2>{comment_id}</h2>\n                  <h2>{comment_post}</h2>\n                  <p>{comment_user}</p>\n                  <h3> {datetime}</h3>\n                  <hr />\n                </div>\n              );\n            })\n          ) : (\n            <p>Loading...</p>\n          )}\n        </div>\n        </React.Fragment>\n \t\t</div>\n\n \t\t)\n }\n}\n\nexport default MeetingComment;"]},"metadata":{},"sourceType":"module"}